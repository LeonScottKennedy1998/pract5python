<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <title>–õ–æ–≥–∏–Ω</title>
</head>
<body>
    <form method="post" id="loginForm">
        <div class="input-group flex-nowrap">
            <span class="input-group-text" id="addon-wrapping">@</span>
            <input type="text" name="public_key" id="public_key" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á" class="form-control" required>
        </div>
        <div class="input-group flex-nowrap">
            <span class="input-group-text" id="addon-wrapping">üîí</span>
            <input type="password" name="password" id="password" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" class="form-control" required>
        </div>
        <button type="submit" class="btn btn-primary">–í–æ–π—Ç–∏</button>
        {% if error %}
        <p style="color:red">–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏: {{ error_message }}</p>
        {% endif %}
    </form>
    <a href="{{ url_for('register') }}" class="btn btn-secondary">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>

    <script>
        function saveFormData() {
            localStorage.setItem('public_key', document.getElementById('public_key').value);
            localStorage.setItem('password', document.getElementById('password').value);
        }
        function loadFormData() {
            const public_key = localStorage.getItem('public_key');
            const password = localStorage.getItem('password');

            if (public_key) document.getElementById('public_key').value = public_key;
            if (password) document.getElementById('password').value = password;
        }
        window.onload = loadFormData;
        document.getElementById('loginForm').addEventListener('submit', saveFormData);
    </script>
</body>
</html>
